#:kivy 2.3.0

<MainScreen>:
    md_bg_color: self.theme_cls.secondaryContainerColor

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            type: "small"
            pos_hint: {"center_x": .5, "top": 1}
            MDBoxLayout:
                orientation: 'vertical'
                MDLabel:
                    id: selected_voice
                    icon: "account-voice"
                    text: "current voice: " + root.selected_voice
                    halign: 'center' 
                    valign: 'middle'
                    size_hint_y: None
                    height: self.texture_size[1]
                    pos_hint: {"center_x": -.5,"center_y": -.5} 
            MDTopAppBarLeadingButtonContainer:
                spacing: "4dp"
                padding: "4dp"
                MDActionTopAppBarButton:
                    id: btn_menu
                    icon: "menu"
                    on_release: root.on_menu_open()
                MDFabButton:
                    id: btn_load
                    icon: "file-upload"
                    on_release: root.on_load_file()
                MDFabButton:
                    id: btn_save
                    icon: "content-save"
                    on_release: root.on_save_file()
                MDFabButton:
                    id: btn_select_voice
                    icon: "account-voice"
                    on_release: root.on_select_voice()
            MDTopAppBarTitle:
                text: root.title
                pos_hint: {"center_x": .5, "center_y": .5}

            MDTopAppBarTrailingButtonContainer:
                spacing: "4dp"
                padding: "4dp"
                MDFabButton:
                    id: btn_play
                    icon: "play-circle"
                    on_press: root.on_play()
                MDFabButton:
                    id: btn_synthesize
                    icon: "file-music"
                    on_press: root.on_synthesize()
                MDFabButton:
                    id: btn_cursor_left
                    icon: "arrow-left-bold-box-outline"
                    on_release: root.on_cursor_left()
                MDFabButton:
                    id: btn_cursor_right
                    icon: "arrow-right-bold-box-outline"
                    on_release: root.on_cursor_right()

        MDScrollView:
            adaptive_height: True
            MDTextField:
                id: text_main
                mode: "filled"
                multiline: True
                size_hint_y: None
                adaptive_height: True
                #new:
                on_cursor: root.on_cursor_control()

        MDBoxLayout:
            adaptive_size: True
            orientation: 'horizontal'
            MDIcon:
                icon: "information-outline"
            MDLabel:
                adaptive_width: True
                id: label_status
                text: "developmental state"
                
<Popups>:
    Label:
        text: "You selected the voice: " + root.voice_name
        halign: 'center'
        font_size: '20sp'
        color: 1, 1, 1, 1
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2, "top":1}

<CustomPopup>:
    title: ""
    separator_height: 0
    size_hint: 0.8, 0.4
    background_color: (0,0,0,0)

    BoxLayout:
        orientation: "vertical"
        padding: 0, 10, 10, 10
        spacing: 10 
        border: 50
        border_color: (1,1,1,1)
        canvas.before:
            Color:
                rgba:(255/255,255/255,255/255,1)

            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [40]
        Label:
            text: root.content_text
            color: 0,0,0,1
            font_size: 25